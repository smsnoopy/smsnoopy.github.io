webpackJsonp([2],{"4tyz":function(t,e){},"7SmP":function(t,e){},Cdx3:function(t,e,a){var l=a("sB3e"),i=a("lktj");a("uqUo")("keys",function(){return function(t){return i(l(t))}})},"DE/X":function(t,e){},Fdwk:function(t,e){},Fy5r:function(t,e){},G0Yd:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var l={name:"updateCollection",components:{CollectionDetail:a("H3Hy").a}},i={render:function(){var t=this.$createElement;return(this._self._c||t)("collection-detail",{attrs:{"is-edit":!0}})},staticRenderFns:[]};var n=a("VU/8")(l,i,!1,function(t){a("DE/X")},null,null);e.default=n.exports},H3Hy:function(t,e,a){"use strict";var l=a("woOf"),i=a.n(l),n=a("mRsl"),s=a("Bp23"),o=a("s/Rn"),r=(a("UgCr"),{name:"ProductInfoDetail",props:{value:Object,isEdit:{type:Boolean,default:!1}},data:function(){return{hasEditCreated:!1,collectionCateOptions:[],selectCollectionCateValue:[],selectProductCateValue:[],productCateOptions:[],brandOptions:[],rules:{name:[{required:!0,message:"请输入商品名称",trigger:"blur"},{min:2,max:140,message:"长度在 2 到 140 个字符",trigger:"blur"}],subTitle:[{required:!0,message:"请输入商品副标题",trigger:"blur"}],collectionCategoryId:[{required:!0,message:"请选择藏品分类",trigger:"blur"}],brandId:[{required:!0,message:"请选择商品品牌",trigger:"blur"}],description:[{required:!0,message:"请输入商品介绍",trigger:"blur"}],requiredProp:[{required:!0,message:"该项为必填项",trigger:"blur"}]}}},created:function(){this.getCollectionCateList(),this.getProductCateList(),this.getBrandList()},computed:{productId:function(){return this.value.id}},watch:{productId:function(t){this.isEdit&&(this.hasEditCreated||void 0!==t&&null!=t&&0!==t&&this.handleEditCreated())},selectProductCateValue:function(t){null!=t&&2===t.length?(this.value.productCategoryId=t[1],this.value.productCategoryName=this.getCateNameById(this.value.productCategoryId)):(this.value.productCategoryId=null,this.value.productCategoryName=null)},selectCollectionCateValue:function(t){this.value.collectionCategoryId=t}},methods:{handleEditCreated:function(){null!=this.value.productCategoryId&&(this.selectProductCateValue.push(this.value.cateParentId),this.selectProductCateValue.push(this.value.productCategoryId)),this.hasEditCreated=!0},getCollectionCateList:function(){var t=this;Object(s.a)().then(function(e){var a=e.data;t.collectionCateOptions=[];for(var l=0;l<a.length;l++){var i=[];if(null!=a[l].children&&a[l].children.length>0)for(var n=0;n<a[l].children.length;n++){var s=[];if(null!=a[l].children[n].children&&a[l].children[n].children.length>0)for(var o=0;o<a[l].children[n].children.length;o++)s.push({label:a[l].children[n].children[o].name,value:a[l].children[n].children[o].id});s.length>0?i.push({label:a[l].children[n].name,value:a[l].children[n].id,children:s}):i.push({label:a[l].children[n].name,value:a[l].children[n].id})}t.collectionCateOptions.push({label:a[l].name,value:a[l].id,children:i})}})},getProductCateList:function(){var t=this;Object(n.a)().then(function(e){var a=e.data;t.productCateOptions=[];for(var l=0;l<a.length;l++){var i=[];if(null!=a[l].children&&a[l].children.length>0)for(var n=0;n<a[l].children.length;n++)i.push({label:a[l].children[n].name,value:a[l].children[n].id});t.productCateOptions.push({label:a[l].name,value:a[l].id,children:i})}})},getBrandList:function(){var t=this;Object(o.a)({pageNum:1,pageSize:100}).then(function(e){t.brandOptions=[];for(var a=e.data.list,l=0;l<a.length;l++)t.brandOptions.push({label:a[l].name,value:a[l].id})})},getCateNameById:function(t){for(var e=null,a=0;a<this.productCateOptions.length;a++)for(var l=0;a<this.productCateOptions[a].children.length;l++)if(this.productCateOptions[a].children[l].value===t)return e=this.productCateOptions[a].children[l].label;return e},handleNext:function(t){var e=this;this.$refs[t].validate(function(t){if(!t)return e.$message({message:"验证失败",type:"error",duration:1e3}),!1;topMark.scrollIntoView(),e.$emit("nextStep")})},handleBrandChange:function(t){for(var e="",a=0;a<this.brandOptions.length;a++)if(this.brandOptions[a].value===t){e=this.brandOptions[a].label;break}this.value.brandName=e}}}),u={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{"margin-top":"50px"}},[a("el-form",{ref:"collectionInfoForm",staticStyle:{width:"720px"},attrs:{inline:!0,model:t.value,rules:t.rules,"label-width":"120px",size:"small"}},[a("el-form-item",{attrs:{label:"系统代码："}},[a("el-input",{staticClass:"input_normal",attrs:{disabled:!0},model:{value:t.value.name,callback:function(e){t.$set(t.value,"name",e)},expression:"value.name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"藏品代码："}},[a("el-input",{staticClass:"input_normal",attrs:{disabled:!0},model:{value:t.value.keyword,callback:function(e){t.$set(t.value,"keyword",e)},expression:"value.keyword"}})],1),t._v(" "),a("br"),t._v(" "),a("el-form-item",{attrs:{label:"藏品名称："}},[a("el-input",{staticClass:"input_normal",staticStyle:{width:"495px"},attrs:{placeholder:""},model:{value:t.value.productSn,callback:function(e){t.$set(t.value,"productSn",e)},expression:"value.productSn"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"藏品分类："}},[a("el-cascader",{staticStyle:{width:"495px"},attrs:{options:t.collectionCateOptions,"change-on-select":"",clearable:""},model:{value:t.selectCollectionCateValue,callback:function(e){t.selectCollectionCateValue=e},expression:"selectCollectionCateValue"}})],1),t._v(" "),a("br"),t._v(" "),a("el-form-item",{attrs:{label:"藏品级别："}},[a("el-select",{staticClass:"input_normal",attrs:{placeholder:"请选择",clearable:""},model:{value:t.value.productSn,callback:function(e){t.$set(t.value,"productSn",e)},expression:"value.productSn"}},[a("el-option",{attrs:{label:"一级藏品",value:"1"}}),t._v(" "),a("el-option",{attrs:{label:"二级藏品",value:"2"}}),t._v(" "),a("el-option",{attrs:{label:"三级藏品",value:"3"}}),t._v(" "),a("el-option",{attrs:{label:"四级藏品",value:"4"}}),t._v(" "),a("el-option",{attrs:{label:"五级藏品",value:"5"}})],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"完残程度："}},[a("el-select",{staticClass:"input_normal",attrs:{placeholder:"请选择",clearable:""},model:{value:t.value.productSn,callback:function(e){t.$set(t.value,"productSn",e)},expression:"value.productSn"}},[a("el-option",{attrs:{label:"基本完整",value:"1"}}),t._v(" "),a("el-option",{attrs:{label:"严重残",value:"2"}}),t._v(" "),a("el-option",{attrs:{label:"局部缺",value:"3"}}),t._v(" "),a("el-option",{attrs:{label:"失部件",value:"4"}}),t._v(" "),a("el-option",{attrs:{label:"报废",value:"5"}})],1)],1),t._v(" "),a("br"),t._v(" "),a("el-form-item",{attrs:{label:"尺寸："}},[a("el-input",{staticClass:"input_normal",attrs:{placeholder:""},model:{value:t.value.productSn,callback:function(e){t.$set(t.value,"productSn",e)},expression:"value.productSn"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"重量："}},[a("el-input",{staticClass:"input_normal",attrs:{placeholder:""},model:{value:t.value.productSn,callback:function(e){t.$set(t.value,"productSn",e)},expression:"value.productSn"}})],1),t._v(" "),a("br"),t._v(" "),a("el-form-item",{attrs:{label:"地域："}},[a("el-input",{staticClass:"input_normal",attrs:{placeholder:""},model:{value:t.value.productSn,callback:function(e){t.$set(t.value,"productSn",e)},expression:"value.productSn"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"年代："}},[a("el-input",{staticClass:"input_normal",attrs:{placeholder:""},model:{value:t.value.productSn,callback:function(e){t.$set(t.value,"productSn",e)},expression:"value.productSn"}})],1),t._v(" "),a("br"),t._v(" "),a("el-form-item",{attrs:{label:"展览说明："}},[a("el-input",{staticClass:"input_normal",staticStyle:{width:"495px"},attrs:{type:"textarea",rows:2,placeholder:""},model:{value:t.value.productSn,callback:function(e){t.$set(t.value,"productSn",e)},expression:"value.productSn"}})],1),t._v(" "),a("br"),t._v(" "),a("el-form-item",{attrs:{label:"关键字："}},[a("el-input",{staticStyle:{width:"495px"},attrs:{placeholder:"关键字以逗号分隔"},model:{value:t.value.productSn,callback:function(e){t.$set(t.value,"productSn",e)},expression:"value.productSn"}})],1),t._v(" "),a("br"),t._v(" "),a("el-form-item",{attrs:{label:"装饰题材："}},[a("el-input",{staticClass:"input_normal",attrs:{placeholder:""},model:{value:t.value.productSn,callback:function(e){t.$set(t.value,"productSn",e)},expression:"value.productSn"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"质地："}},[a("el-input",{staticClass:"input_normal",attrs:{placeholder:""},model:{value:t.value.productSn,callback:function(e){t.$set(t.value,"productSn",e)},expression:"value.productSn"}})],1),t._v(" "),a("br"),t._v(" "),a("el-form-item",{attrs:{label:"铭文："}},[a("el-input",{staticClass:"input_normal",staticStyle:{width:"495px"},attrs:{placeholder:""},model:{value:t.value.productSn,callback:function(e){t.$set(t.value,"productSn",e)},expression:"value.productSn"}})],1),t._v(" "),a("br"),t._v(" "),a("el-form-item",{attrs:{label:"形态特征："}},[a("el-input",{staticClass:"input_normal",staticStyle:{width:"495px"},attrs:{placeholder:""},model:{value:t.value.productSn,callback:function(e){t.$set(t.value,"productSn",e)},expression:"value.productSn"}})],1),t._v(" "),a("br"),t._v(" "),a("el-form-item",{attrs:{label:"独特标记："}},[a("el-input",{staticClass:"input_normal",staticStyle:{width:"495px"},attrs:{placeholder:""},model:{value:t.value.productSn,callback:function(e){t.$set(t.value,"productSn",e)},expression:"value.productSn"}})],1),t._v(" "),a("br"),t._v(" "),a("br")],1),t._v(" "),a("br"),t._v(" "),a("div",{staticStyle:{"text-align":"center"}},[a("el-button",{attrs:{type:"primary",size:"medium"},on:{click:function(e){t.handleNext("collectionInfoForm")}}},[t._v("下一步，填写来源及状况信息")])],1)],1)},staticRenderFns:[]};var c=a("VU/8")(r,u,!1,function(t){a("fy6M")},"data-v-f59497d8",null).exports,d=a("vLgD");var p={name:"ProductSaleDetail",props:{value:Object,isEdit:{type:Boolean,default:!1}},data:function(){return{pickerOptions1:{disabledDate:function(t){return t.getTime()<Date.now()}}}},created:function(){var t,e=this;this.isEdit||(t={defaultStatus:0},Object(d.a)({url:"/memberLevel/list",method:"get",params:t})).then(function(t){for(var a=[],l=0;l<t.data.length;l++){var i=t.data[l];a.push({memberLevelId:i.id,memberLevelName:i.name})}e.value.memberPriceList=a})},computed:{selectServiceList:{get:function(){var t=[];if(void 0===this.value.serviceIds||null==this.value.serviceIds||""===this.value.serviceIds)return t;for(var e=this.value.serviceIds.split(","),a=0;a<e.length;a++)t.push(Number(e[a]));return t},set:function(t){var e="";if(null!=t&&t.length>0){for(var a=0;a<t.length;a++)e+=t[a]+",";e.endsWith(",")&&(e=e.substr(0,e.length-1)),this.value.serviceIds=e}else this.value.serviceIds=null}}},methods:{handleEditCreated:function(){var t=this.value.serviceIds.split(",");console.log("handleEditCreated",t);for(var e=0;e<t.length;e++)this.selectServiceList.push(Number(t[e]))},handleRemoveProductLadder:function(t,e){var a=this.value.productLadderList;1===a.length?(a.pop(),a.push({count:0,discount:0,price:0})):a.splice(t,1)},handleAddProductLadder:function(t,e){var a=this.value.productLadderList;a.length<3?a.push({count:0,discount:0,price:0}):this.$message({message:"最多只能添加三条",type:"warning"})},handleRemoveFullReduction:function(t,e){var a=this.value.productFullReductionList;1===a.length?(a.pop(),a.push({fullPrice:0,reducePrice:0})):a.splice(t,1)},handleAddFullReduction:function(t,e){var a=this.value.productFullReductionList;a.length<3?a.push({fullPrice:0,reducePrice:0}):this.$message({message:"最多只能添加三条",type:"warning"})},handlePrev:function(){this.$emit("prevStep")},handleNext:function(){this.$emit("nextStep")}}},h={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{"margin-top":"50px"}},[a("el-form",{ref:"productSaleForm",staticStyle:{width:"720px"},attrs:{inline:!0,model:t.value,"label-width":"120px",size:"small"}},[a("el-form-item",{attrs:{label:"来源："}},[a("el-input",{staticClass:"input_normal",attrs:{placeholder:""},model:{value:t.value.productSn,callback:function(e){t.$set(t.value,"productSn",e)},expression:"value.productSn"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"来源单位/个人："}},[a("el-input",{staticClass:"input_normal",attrs:{placeholder:""},model:{value:t.value.productSn,callback:function(e){t.$set(t.value,"productSn",e)},expression:"value.productSn"}})],1),t._v(" "),a("br"),t._v(" "),a("el-form-item",{attrs:{label:"藏品所有权："}},[a("el-input",{staticClass:"input_normal",attrs:{placeholder:""},model:{value:t.value.productSn,callback:function(e){t.$set(t.value,"productSn",e)},expression:"value.productSn"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"保护等级："}},[a("el-select",{staticClass:"input_normal",attrs:{placeholder:"请选择",clearable:""},model:{value:t.value.collectionPrcValue,callback:function(e){t.$set(t.value,"collectionPrcValue",e)},expression:"value.collectionPrcValue"}},[a("el-option",{attrs:{label:"已经保护修复",value:"1"}}),t._v(" "),a("el-option",{attrs:{label:"需要保护修复",value:"2"}}),t._v(" "),a("el-option",{attrs:{label:"亟需保护修复",value:"3"}}),t._v(" "),a("el-option",{attrs:{label:"紧急保护修复",value:"4"}})],1)],1),t._v(" "),a("br"),t._v(" "),a("el-form-item",{attrs:{label:"当前状况："}},[a("el-select",{staticClass:"input_normal",attrs:{placeholder:"请选择",clearable:""},model:{value:t.value.collectionFunctionValue,callback:function(e){t.$set(t.value,"collectionFunctionValue",e)},expression:"value.collectionFunctionValue"}},[a("el-option",{attrs:{label:"馆内展览",value:"3"}}),t._v(" "),a("el-option",{attrs:{label:"库存",value:"4"}}),t._v(" "),a("el-option",{attrs:{label:"馆外展览",value:"5"}})],1)],1),t._v(" "),a("el-form-item",{attrs:{"label-width":"120px",label:"入藏日期："}},[a("el-date-picker",{staticStyle:{width:"180px"},attrs:{type:"date",placeholder:"yyyy-mm-dd"},model:{value:t.value.date1,callback:function(e){t.$set(t.value,"date1",e)},expression:"value.date1"}})],1),t._v(" "),a("br"),t._v(" "),a("el-form-item",{attrs:{label:"备注："}},[a("el-input",{staticStyle:{width:"495px"},attrs:{type:"textarea",rows:2,placeholder:""},model:{value:t.value.productSn,callback:function(e){t.$set(t.value,"productSn",e)},expression:"value.productSn"}})],1),t._v(" "),a("br"),t._v(" "),a("el-form-item",{attrs:{label:"更换电池日期：","label-width":"120px"}},[a("el-date-picker",{staticStyle:{width:"180px"},attrs:{type:"date",placeholder:"yyyy-mm-dd"},model:{value:t.value.date1,callback:function(e){t.$set(t.value,"date1",e)},expression:"value.date1"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"电池更换周期(天)：","label-width":"160px"}},[a("el-input",{staticStyle:{width:"140px"},attrs:{placeholder:""},model:{value:t.value.productSn,callback:function(e){t.$set(t.value,"productSn",e)},expression:"value.productSn"}})],1),t._v(" "),a("br"),t._v(" "),a("el-form-item",{attrs:{label:"最近维护日期：","label-width":"120px"}},[a("el-date-picker",{staticStyle:{width:"180px"},attrs:{type:"date",placeholder:"yyyy-mm-dd"},model:{value:t.value.date1,callback:function(e){t.$set(t.value,"date1",e)},expression:"value.date1"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"维护周期(天)：","label-width":"160px"}},[a("el-input",{staticStyle:{width:"140px"},attrs:{placeholder:""},model:{value:t.value.productSn,callback:function(e){t.$set(t.value,"productSn",e)},expression:"value.productSn"}})],1)],1),t._v(" "),a("br"),t._v(" "),a("div",{staticStyle:{"text-align":"center"}},[a("el-button",{attrs:{size:"medium"},on:{click:t.handlePrev}},[t._v("上一步，填写基本信息")]),t._v(" "),a("el-button",{attrs:{type:"primary",size:"medium"},on:{click:t.handleNext}},[t._v("下一步，上传文档及填写配件信息")])],1)],1)},staticRenderFns:[]};var v=a("VU/8")(p,h,!1,function(t){a("uUIc")},"data-v-4b7be62d",null).exports;var m=a("3idm"),f=a("//Fk"),b=a.n(f),g=a("ZW30"),_={name:"singleUpload",props:{value:String},computed:{imageUrl:function(){return this.value},imageName:function(){return null!=this.value&&""!==this.value?this.value.substr(this.value.lastIndexOf("/")+1):null},fileList:function(){return[{name:this.imageName,url:this.imageUrl}]},showFileList:{get:function(){return null!==this.value&&""!==this.value&&void 0!==this.value},set:function(t){}}},data:function(){return{dataObj:{policy:"",signature:"",key:"",ossaccessKeyId:"",dir:"",host:""},dialogVisible:!1}},methods:{emitInput:function(t){this.$emit("input",t)},handleRemove:function(t,e){this.emitInput("")},handlePreview:function(t){this.dialogVisible=!0},beforeUpload:function(t){var e=this;return new b.a(function(t,a){Object(g.a)().then(function(a){e.dataObj.policy=a.data.policy,e.dataObj.signature=a.data.signature,e.dataObj.ossaccessKeyId=a.data.accessKeyId,e.dataObj.key=a.data.dir+"/${filename}",e.dataObj.dir=a.data.dir,e.dataObj.host=a.data.host,t(!0)}).catch(function(t){console.log(t),a(!1)})})},handleUploadSuccess:function(t,e){this.showFileList=!0,this.fileList.pop(),this.fileList.push({name:e.name,url:this.dataObj.host+"/"+this.dataObj.dir+"/"+e.name}),this.emitInput(this.fileList[0].url)}}},y={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-upload",{attrs:{action:"http://macro-oss.oss-cn-shenzhen.aliyuncs.com",data:t.dataObj,"list-type":"picture",multiple:!1,"show-file-list":t.showFileList,"file-list":t.fileList,"before-upload":t.beforeUpload,"on-remove":t.handleRemove,"on-success":t.handleUploadSuccess,"on-preview":t.handlePreview}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("点击上传")]),t._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("只能上传jpg/png文件，且不超过10MB")])],1),t._v(" "),a("el-dialog",{attrs:{visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("img",{attrs:{width:"100%",src:t.fileList[0].url,alt:""}})])],1)},staticRenderFns:[]};var S=a("VU/8")(_,y,!1,function(t){a("SkFu")},null,null).exports,w=a("bOdI"),k=a.n(w),P={name:"multiUpload",props:{value:Array,maxCount:{type:Number,default:5}},data:function(){return{dataObj:{policy:"",signature:"",key:"",ossaccessKeyId:"",dir:"",host:""},dialogVisible:!1,dialogImageUrl:null}},computed:{fileList:function(){for(var t=[],e=0;e<this.value.length;e++)t.push({url:this.value[e]});return t}},methods:{emitInput:function(t){for(var e=[],a=0;a<t.length;a++)e.push(t[a].url);this.$emit("input",e)},handleRemove:function(t,e){this.emitInput(e)},handlePreview:function(t){this.dialogVisible=!0,this.dialogImageUrl=t.url},beforeUpload:function(t){var e=this;return new b.a(function(t,a){Object(g.a)().then(function(a){e.dataObj.policy=a.data.policy,e.dataObj.signature=a.data.signature,e.dataObj.ossaccessKeyId=a.data.accessKeyId,e.dataObj.key=a.data.dir+"/${filename}",e.dataObj.dir=a.data.dir,e.dataObj.host=a.data.host,t(!0)}).catch(function(t){console.log(t),a(!1)})})},handleUploadSuccess:function(t,e){this.fileList.push(k()({url:e.name},"url",this.dataObj.host+"/"+this.dataObj.dir+"/"+e.name)),this.emitInput(this.fileList)},handleExceed:function(t,e){this.$message({message:"最多只能上传"+this.maxCount+"张图片",type:"warning",duration:1e3})}}},C={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-upload",{attrs:{action:"http://macro-oss.oss-cn-shenzhen.aliyuncs.com",data:t.dataObj,"list-type":"picture-card","file-list":t.fileList,"before-upload":t.beforeUpload,"on-remove":t.handleRemove,"on-success":t.handleUploadSuccess,"on-preview":t.handlePreview,limit:t.maxCount,"on-exceed":t.handleExceed}},[a("i",{staticClass:"el-icon-plus"})]),t._v(" "),a("el-dialog",{attrs:{visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("img",{attrs:{width:"100%",src:t.dialogImageUrl,alt:""}})])],1)},staticRenderFns:[]};var x=a("VU/8")(P,C,!1,function(t){a("xMRZ")},null,null).exports,I={name:"singleFileUpload",props:{value:String},computed:{imageUrl:function(){return this.value},imageName:function(){return null!=this.value&&""!==this.value?this.value.substr(this.value.lastIndexOf("/")+1):null},showFileList:{get:function(){return null!==this.value&&""!==this.value&&void 0!==this.value},set:function(t){}}},data:function(){return{dataObj:{policy:"",signature:"",key:"",ossaccessKeyId:"",dir:"",host:""},dialogVisible:!1,fileList:[{name:"藏品说明书1.doc",url:""},{name:"藏品说明书2.xls",url:""}]}},methods:{emitInput:function(t){this.$emit("input",t)},beforeRemove:function(t,e){return this.$confirm("确定移除 "+t.name+"？")},handleRemove:function(t,e){this.emitInput("")},handlePreview:function(t){this.dialogVisible=!0},beforeUpload:function(t){var e=this;return new b.a(function(t,a){Object(g.a)().then(function(a){e.dataObj.policy=a.data.policy,e.dataObj.signature=a.data.signature,e.dataObj.ossaccessKeyId=a.data.accessKeyId,e.dataObj.key=a.data.dir+"/${filename}",e.dataObj.dir=a.data.dir,e.dataObj.host=a.data.host,t(!0)}).catch(function(t){console.log(t),a(!1)})})},handleUploadSuccess:function(t,e){this.showFileList=!0,this.fileList.pop(),this.fileList.push({name:e.name,url:this.dataObj.host+"/"+this.dataObj.dir+"/"+e.name}),this.emitInput(this.fileList[0].url)}}},L={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-upload",{attrs:{action:"http://xxxx.aliyuncs.com",data:t.dataObj,multiple:!1,"show-file-list":t.showFileList,"file-list":t.fileList,"before-upload":t.beforeUpload,"before-remove":t.beforeRemove,"on-remove":t.handleRemove,"on-success":t.handleUploadSuccess,"on-preview":t.handlePreview}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("点击上传")])],1),t._v(" "),a("el-dialog",{attrs:{visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("img",{attrs:{width:"100%",src:t.fileList[0].url,alt:""}})])],1)},staticRenderFns:[]};var O=a("VU/8")(I,L,!1,function(t){a("U6mV")},null,null).exports,A={name:"multiImgUpload",props:{value:Array,maxCount:{type:Number,default:5}},data:function(){return{dataObj:{policy:"",signature:"",key:"",ossaccessKeyId:"",dir:"",host:""},dialogVisible:!1,dialogImageUrl:null}},computed:{fileList:function(){for(var t=[],e=0;e<this.value.length;e++)t.push({url:this.value[e]});return t}},methods:{emitInput:function(t){for(var e=[],a=0;a<t.length;a++)e.push(t[a].url);this.$emit("input",e)},handleRemove:function(t,e){this.emitInput(e)},handlePreview:function(t){this.dialogVisible=!0,this.dialogImageUrl=t.url},beforeUpload:function(t){var e=this;return new b.a(function(t,a){Object(g.a)().then(function(a){e.dataObj.policy=a.data.policy,e.dataObj.signature=a.data.signature,e.dataObj.ossaccessKeyId=a.data.accessKeyId,e.dataObj.key=a.data.dir+"/${filename}",e.dataObj.dir=a.data.dir,e.dataObj.host=a.data.host,t(!0)}).catch(function(t){console.log(t),a(!1)})})},handleUploadSuccess:function(t,e){this.fileList.push(k()({url:e.name},"url",this.dataObj.host+"/"+this.dataObj.dir+"/"+e.name)),this.emitInput(this.fileList)},handleExceed:function(t,e){this.$message({message:"最多只能上传"+this.maxCount+"张图片",type:"warning",duration:1e3})}}},j={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-upload",{attrs:{action:"http://xxxx.aliyuncs.com",data:t.dataObj,"list-type":"picture-card","file-list":t.fileList,"before-upload":t.beforeUpload,"on-remove":t.handleRemove,"on-success":t.handleUploadSuccess,"on-preview":t.handlePreview,limit:t.maxCount,"on-exceed":t.handleExceed}},[a("i",{staticClass:"el-icon-plus"})]),t._v(" "),a("el-dialog",{attrs:{visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("img",{attrs:{width:"100%",src:t.dialogImageUrl,alt:""}})])],1)},staticRenderFns:[]};var $=a("VU/8")(A,j,!1,function(t){a("4tyz")},null,null).exports,V=a("fZjL"),F=a.n(V),R={name:"editorSlideUpload",props:{color:{type:String,default:"#1890ff"}},data:function(){return{dialogVisible:!1,listObj:{},fileList:[],dataObj:{policy:"",signature:"",key:"",ossaccessKeyId:"",dir:"",host:""}}},methods:{checkAllSuccess:function(){var t=this;return F()(this.listObj).every(function(e){return t.listObj[e].hasSuccess})},handleSubmit:function(){var t=this,e=F()(this.listObj).map(function(e){return t.listObj[e]});this.checkAllSuccess()?(console.log(e),this.$emit("successCBK",e),this.listObj={},this.fileList=[],this.dialogVisible=!1):this.$message("请等待所有图片上传成功 或 出现了网络问题，请刷新页面重新上传！")},handleSuccess:function(t,e){for(var a=e.uid,l=F()(this.listObj),i=0,n=l.length;i<n;i++)if(this.listObj[l[i]].uid===a)return this.listObj[l[i]].url=this.dataObj.host+"/"+this.dataObj.dir+"/"+e.name,void(this.listObj[l[i]].hasSuccess=!0)},handleRemove:function(t){for(var e=t.uid,a=F()(this.listObj),l=0,i=a.length;l<i;l++)if(this.listObj[a[l]].uid===e)return void delete this.listObj[a[l]]},beforeUpload:function(t){var e=this,a=this,l=t.uid;return this.listObj[l]={},new b.a(function(i,n){Object(g.a)().then(function(n){a.dataObj.policy=n.data.policy,a.dataObj.signature=n.data.signature,a.dataObj.ossaccessKeyId=n.data.accessKeyId,a.dataObj.key=n.data.dir+"/${filename}",a.dataObj.dir=n.data.dir,a.dataObj.host=n.data.host,a.listObj[l]={hasSuccess:!1,uid:t.uid,width:e.width,height:e.height},i(!0)}).catch(function(t){console.log(t),n(!1)})})}}},U={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"upload-container"},[a("el-button",{style:{background:t.color,borderColor:t.color},attrs:{icon:"el-icon-upload",size:"mini",type:"primary"},on:{click:function(e){t.dialogVisible=!0}}},[t._v("上传图片\n  ")]),t._v(" "),a("el-dialog",{attrs:{"append-to-body":"",visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("el-upload",{staticClass:"editor-slide-upload",attrs:{action:"http://macro-oss.oss-cn-shenzhen.aliyuncs.com",data:t.dataObj,multiple:!0,"file-list":t.fileList,"show-file-list":!0,"list-type":"picture-card","on-remove":t.handleRemove,"on-success":t.handleSuccess,"before-upload":t.beforeUpload}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("点击上传")])],1),t._v(" "),a("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.handleSubmit}},[t._v("确 定")])],1)],1)},staticRenderFns:[]};var E=a("VU/8")(R,U,!1,function(t){a("Fdwk")},"data-v-0821ce18",null).exports,T=(a("WQDg"),["advlist anchor autolink autosave code codesample colorpicker colorpicker\n contextmenu directionality emoticons fullscreen hr image imagetools importcss insertdatetime\n legacyoutput link lists media nonbreaking noneditable pagebreak paste preview print save searchreplace\n spellchecker tabfocus table template textcolor textpattern visualblocks visualchars wordcount"]),D=["bold italic underline strikethrough alignleft aligncenter\n alignright outdent indent  blockquote undo redo removeformat","hr bullist numlist link image charmap\t preview anchor pagebreak\n   fullscreen insertdatetime media table forecolor backcolor"],N={name:"tinymce",components:{editorImage:E},props:{id:{type:String},value:{type:String,default:""},toolbar:{type:Array,required:!1,default:function(){return[]}},menubar:{default:"file edit insert view format table"},height:{type:Number,required:!1,default:360},width:{type:Number,required:!1,default:720}},data:function(){return{hasChange:!1,hasInit:!1,tinymceId:this.id||"vue-tinymce-"+ +new Date}},watch:{value:function(t){var e=this;!this.hasChange&&this.hasInit&&this.$nextTick(function(){return window.tinymce.get(e.tinymceId).setContent(t)})}},mounted:function(){this.initTinymce()},activated:function(){this.initTinymce()},deactivated:function(){this.destroyTinymce()},methods:{initTinymce:function(){var t=this,e=this;window.tinymce.init({selector:"#"+this.tinymceId,width:this.width,height:this.height,language:"zh_CN",body_class:"panel-body ",object_resizing:!1,toolbar:this.toolbar.length>0?this.toolbar:D,menubar:!1,plugins:T,end_container_on_empty_block:!0,powerpaste_word_import:"clean",code_dialog_height:450,code_dialog_width:1e3,advlist_bullet_styles:"square",advlist_number_styles:"default",imagetools_cors_hosts:["www.tinymce.com","codepen.io"],default_link_target:"_blank",link_title:!1,init_instance_callback:function(a){e.value&&a.setContent(e.value),e.hasInit=!0,a.on("NodeChange Change KeyUp SetContent",function(){t.hasChange=!0,t.$emit("input",a.getContent())})}})},destroyTinymce:function(){window.tinymce.get(this.tinymceId)&&window.tinymce.get(this.tinymceId).destroy()},setContent:function(t){window.tinymce.get(this.tinymceId).setContent(t)},getContent:function(){window.tinymce.get(this.tinymceId).getContent()},imageSuccessCBK:function(t){var e=this;t.forEach(function(t){window.tinymce.get(e.tinymceId).insertContent('<img class="wscnph" src="'+t.url+'" >')})}},destroyed:function(){this.destroyTinymce()}},B={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"tinymce-container editor-container"},[e("textarea",{staticClass:"tinymce-textarea",attrs:{id:this.tinymceId}}),this._v(" "),e("div",{staticClass:"editor-custom-btn-container"},[e("editorImage",{staticClass:"editor-upload-btn",attrs:{color:"#1890ff"},on:{successCBK:this.imageSuccessCBK}})],1)])},staticRenderFns:[]};var z={name:"CollectionAttrDetail",components:{SingleUpload:S,MultiUpload:x,SingleFileUpload:O,MultiImgUpload:$,Tinymce:a("VU/8")(N,B,!1,function(t){a("UCED")},"data-v-e8a4bd54",null).exports},props:{value:Object,isEdit:{type:Boolean,default:!1}},data:function(){return{hasEditCreated:!1,productAttributeCategoryOptions:[],selectProductAttr:[],selectProductParam:[],selectProductAttrPics:[],addProductAttrValue:"",activeHtmlName:"pc",attInfo:{dialogVisible:!1,attId:"123",attName:"abc"},attList:null,attDialogTitle:"添加配件"}},computed:{hasAttrPic:function(){return!(this.selectProductAttrPics.length<1)},productId:function(){return this.value.id},selectProductPics:{get:function(){var t=[];if(void 0===this.value.pic||null==this.value.pic||""===this.value.pic)return t;if(t.push(this.value.pic),void 0===this.value.albumPics||null==this.value.albumPics||""===this.value.albumPics)return t;for(var e=this.value.albumPics.split(","),a=0;a<e.length;a++)t.push(e[a]);return t},set:function(t){if(null==t||0===t.length)this.value.pic=null,this.value.albumPics=null;else if(this.value.pic=t[0],this.value.albumPics="",t.length>1)for(var e=1;e<t.length;e++)this.value.albumPics+=t[e],e!==t.length-1&&(this.value.albumPics+=",")}}},created:function(){this.getProductAttrCateList(),this.getList()},watch:{productId:function(t){this.isEdit&&(this.hasEditCreated||void 0!==t&&null!=t&&0!==t&&this.handleEditCreated())}},methods:{getList:function(){this.attList=[{id:"20180316103522",object_id:"101001-001",att_id:"101001-001-004",att_type:"附件",att_name:"木质小盒",att_memo:"装钟的小盒上有钥匙孔，配常平架",att_num:"1",att_unit:"个",att_current_complete:"馆内展览",att_in_time:"2018-01-01",remarks:"abcdefg"},{id:"20180316103522",object_id:"101001-001",att_id:"101001-001-005",att_type:"说明书",att_name:"原装说明书",att_memo:"说明书说明书",att_num:"1",att_unit:"本",att_current_complete:"库存",att_in_time:"2018-01-02",remarks:"111222333"}]},handleAttInfoConfirm:function(){this.$message({message:"保存配件信息",type:"info",duration:1e3})},handleShowAttInfoDialog:function(t){t.updateFlg?this.attDialogTitle="修改配件":this.attDialogTitle="添加配件",this.attInfo.dialogVisible=!0},objectFunctionFormater:function(t){for(var e=this.$store.state.app.collectionFunctionOptions,a=0;a<e.length;a++){var l=e[a];return l.value===t?l.label:""}},handleEditCreated:function(){null!=this.value.productAttributeCategoryId&&this.handleProductAttrChange(this.value.productAttributeCategoryId),this.hasEditCreated=!0},getProductAttrCateList:function(){var t,e=this;(t={pageNum:1,pageSize:100},Object(d.a)({url:"/productAttribute/category/list",method:"get",params:t})).then(function(t){e.productAttributeCategoryOptions=[];for(var a=t.data.list,l=0;l<a.length;l++)e.productAttributeCategoryOptions.push({label:a[l].name,value:a[l].id})})},getProductAttrList:function(t,e){var a=this,l={pageNum:1,pageSize:100,type:t};Object(m.a)(e,l).then(function(e){var l=e.data.list;if(0===t){a.selectProductAttr=[];for(var i=0;i<l.length;i++){var n=[],s=[];a.isEdit&&(1===l[i].handAddStatus&&(n=a.getEditAttrOptions(l[i].id)),s=a.getEditAttrValues(i)),a.selectProductAttr.push({id:l[i].id,name:l[i].name,handAddStatus:l[i].handAddStatus,inputList:l[i].inputList,values:s,options:n})}a.isEdit&&a.refreshProductAttrPics()}else{a.selectProductParam=[];for(var o=0;o<l.length;o++){var r=null;a.isEdit&&(r=a.getEditParamValue(l[o].id)),a.selectProductParam.push({id:l[o].id,name:l[o].name,value:r,inputType:l[o].inputType,inputList:l[o].inputList})}}})},getEditAttrOptions:function(t){for(var e=[],a=0;a<this.value.productAttributeValueList.length;a++){var l=this.value.productAttributeValueList[a];if(l.productAttributeId===t){for(var i=l.value.split(","),n=0;n<i.length;n++)e.push(i[n]);break}}return e},getEditAttrValues:function(t){var e=[];if(0===t)for(var a=0;a<this.value.skuStockList.length;a++){var l=this.value.skuStockList[a];null!=l.sp1&&-1===e.indexOf(l.sp1)&&e.push(l.sp1)}else if(1===t)for(var i=0;i<this.value.skuStockList.length;i++){var n=this.value.skuStockList[i];null!=n.sp2&&-1===e.indexOf(n.sp2)&&e.push(n.sp2)}else for(var s=0;s<this.value.skuStockList.length;s++){var o=this.value.skuStockList[s];null!=o.sp3&&-1===e.indexOf(o.sp3)&&e.push(o.sp3)}return e},getEditParamValue:function(t){for(var e=0;e<this.value.productAttributeValueList.length;e++)if(t===this.value.productAttributeValueList[e].productAttributeId)return this.value.productAttributeValueList[e].value},handleProductAttrChange:function(t){this.getProductAttrList(0,t),this.getProductAttrList(1,t)},getInputListArr:function(t){return t.split(",")},handleAddProductAttrValue:function(t){var e=this.selectProductAttr[t].options;null!=this.addProductAttrValue&&""!=this.addProductAttrValue?-1===e.indexOf(this.addProductAttrValue)?(this.selectProductAttr[t].options.push(this.addProductAttrValue),this.addProductAttrValue=null):this.$message({message:"属性值不能重复",type:"warning",duration:1e3}):this.$message({message:"属性值不能为空",type:"warning",duration:1e3})},handleRemoveProductAttrValue:function(t,e){this.selectProductAttr[t].options.splice(e,1)},getProductSkuSp:function(t,e){return 0===e?t.sp1:1===e?t.sp2:t.sp3},handleRefreshProductSkuList:function(){var t=this;this.$confirm("刷新列表将导致sku信息重新生成，是否要刷新","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.refreshProductAttrPics(),t.refreshProductSkuList()})},handleSyncProductSkuPrice:function(){var t=this;this.$confirm("将同步第一个sku的价格到所有sku,是否继续","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){if(null!==t.value.skuStockList&&t.value.skuStockList.length>0)for(var e=t.value.skuStockList[0].price,a=0;a<t.value.skuStockList.length;a++)t.value.skuStockList[a].price=e})},refreshProductSkuList:function(){this.value.skuStockList=[];var t=this.value.skuStockList;if(1===this.selectProductAttr.length)for(var e=this.selectProductAttr[0].values,a=0;a<e.length;a++)t.push({sp1:e[a]});else if(2===this.selectProductAttr.length)for(var l=this.selectProductAttr[0].values,i=this.selectProductAttr[1].values,n=0;n<l.length;n++)if(0!==i.length)for(var s=0;s<i.length;s++)t.push({sp1:l[n],sp2:i[s]});else t.push({sp1:l[n]});else for(var o=this.selectProductAttr[0].values,r=this.selectProductAttr[1].values,u=this.selectProductAttr[2].values,c=0;c<o.length;c++)if(0!==r.length)for(var d=0;d<r.length;d++)if(0!==u.length)for(var p=0;p<u.length;p++)t.push({sp1:o[c],sp2:r[d],sp3:u[p]});else t.push({sp1:o[c],sp2:r[d]});else t.push({sp1:o[c]})},refreshProductAttrPics:function(){if(this.selectProductAttrPics=[],this.selectProductAttr.length>=1)for(var t=this.selectProductAttr[0].values,e=0;e<t.length;e++){var a=null;this.isEdit&&(a=this.getProductSkuPic(t[e])),this.selectProductAttrPics.push({name:t[e],pic:a})}},getProductSkuPic:function(t){for(var e=0;e<this.value.skuStockList.length;e++)if(t===this.value.skuStockList[e].sp1)return this.value.skuStockList[e].pic;return null},mergeProductAttrValue:function(){this.value.productAttributeValueList=[];for(var t=0;t<this.selectProductAttr.length;t++){var e=this.selectProductAttr[t];1===e.handAddStatus&&null!=e.options&&e.options.length>0&&this.value.productAttributeValueList.push({productAttributeId:e.id,value:this.getOptionStr(e.options)})}for(var a=0;a<this.selectProductParam.length;a++){var l=this.selectProductParam[a];this.value.productAttributeValueList.push({productAttributeId:l.id,value:l.value})}},mergeProductAttrPics:function(){for(var t=0;t<this.selectProductAttrPics.length;t++)for(var e=0;e<this.value.skuStockList.length;e++)this.value.skuStockList[e].sp1===this.selectProductAttrPics[t].name&&(this.value.skuStockList[e].pic=this.selectProductAttrPics[t].pic)},getOptionStr:function(t){for(var e="",a=0;a<t.length;a++)e+=t[a],a!=t.length-1&&(e+=",");return e},handleRemoveProductSku:function(t,e){var a=this.value.skuStockList;1===a.length?a.pop():a.splice(t,1)},getParamInputList:function(t){return t.split(",")},handlePrev:function(){this.$emit("prevStep")},handleFinishCommit:function(){this.mergeProductAttrValue(),this.mergeProductAttrPics(),this.$emit("finishCommit",this.isEdit)}}},H={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{"margin-top":"50px"}},[a("el-form",{ref:"productAttrForm",staticStyle:{width:"720px"},attrs:{model:t.value,"label-width":"120px",size:"small"}},[a("el-form-item",{attrs:{label:"藏品相册："}},[a("multi-img-upload",{model:{value:t.selectProductPics,callback:function(e){t.selectProductPics=e},expression:"selectProductPics"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"藏品文档："}},[a("single-file-upload",{model:{value:t.selectProductPics,callback:function(e){t.selectProductPics=e},expression:"selectProductPics"}})],1),t._v(" "),a("el-card",{staticClass:"cardBg",attrs:{shadow:"never"}},[a("span",[t._v("配件列表")]),t._v(" "),a("el-button",{staticStyle:{float:"right"},attrs:{icon:"el-icon-plus",size:"small"},on:{click:function(e){t.handleShowAttInfoDialog({updateFlg:!1})}}},[t._v("添加配件")]),t._v(" "),a("el-table",{staticStyle:{width:"100%","margin-top":"20px"},attrs:{data:t.attList,"empty-text":" ",border:""}},[a("el-table-column",{attrs:{label:"系统代码",width:"140",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.id))]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"藏品代码",width:"100",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.object_id))]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"配件代码",width:"140",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.att_id))]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"当前状况",width:"100",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n            "+t._s(e.row.att_current_complete)+"\n            ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"配件分类",width:"100",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n            "+t._s(e.row.att_type)+"\n            ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"配件名称",width:"100",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.att_name))]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"配件说明",width:"100",align:"center","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.att_memo))]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"入藏日期",width:"100",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.att_in_time))]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"配件数量",width:"100",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.att_num))]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"配件数量单位",width:"100",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.att_unit))]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"备注",width:"100",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.remarks))]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作",width:"110",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button-group",[a("el-tooltip",{attrs:{content:"编辑配件",placement:"bottom",effect:"light"}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"mini"},on:{click:function(e){t.handleShowAttInfoDialog({updateFlg:!0})}}})],1),t._v(" "),a("el-tooltip",{attrs:{content:"删除配件",placement:"bottom",effect:"light"}},[a("el-button",{attrs:{type:"error",icon:"el-icon-delete",size:"mini"},on:{click:function(a){t.handleRemoveProductSku(e.$index,e.row)}}})],1)],1)]}}])})],1)],1),t._v(" "),a("br"),t._v(" "),a("div",{staticStyle:{"text-align":"center"}},[a("el-button",{attrs:{size:"medium"},on:{click:t.handlePrev}},[t._v("上一步，填写来源及状况信息")]),t._v(" "),a("el-button",{attrs:{type:"primary",size:"medium"},on:{click:t.handleFinishCommit}},[t._v("完成，提交藏品")])],1)],1),t._v(" "),a("el-dialog",{attrs:{title:t.attDialogTitle,visible:t.attInfo.dialogVisible,width:"60%"},on:{"update:visible":function(e){t.$set(t.attInfo,"dialogVisible",e)}}},[a("div",{staticStyle:{width:"100%","margin-left":"20px"}},[a("el-form",{attrs:{inline:!0,model:t.attInfo,size:"small"}},[a("el-form-item",{attrs:{label:"系统代码："}},[a("el-input",{staticClass:"input_normal",attrs:{disabled:!0},model:{value:t.value.name,callback:function(e){t.$set(t.value,"name",e)},expression:"value.name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"藏品代码："}},[a("el-input",{staticClass:"input_normal",attrs:{disabled:!0},model:{value:t.value.keyword,callback:function(e){t.$set(t.value,"keyword",e)},expression:"value.keyword"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"配件代码："}},[a("el-input",{staticClass:"input_normal",attrs:{disabled:!0},model:{value:t.value.keyword,callback:function(e){t.$set(t.value,"keyword",e)},expression:"value.keyword"}})],1),t._v(" "),a("br"),t._v(" "),a("el-form-item",{attrs:{label:"当前状况："}},[a("el-select",{staticClass:"input_normal",attrs:{placeholder:"请选择"},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}},[a("el-option",{attrs:{label:"馆内展览",value:"1"}}),t._v(" "),a("el-option",{attrs:{label:"库存",value:"2"}}),t._v(" "),a("el-option",{attrs:{label:"馆外展览",value:"3"}})],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"配件分类："}},[a("el-select",{staticClass:"input_normal",attrs:{placeholder:"请选择"},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}},[a("el-option",{attrs:{label:"附件",value:"1"}}),t._v(" "),a("el-option",{attrs:{label:"钥匙",value:"2"}}),t._v(" "),a("el-option",{attrs:{label:"包装盒",value:"3"}}),t._v(" "),a("el-option",{attrs:{label:"说明书",value:"4"}})],1)],1),t._v(" "),a("br"),t._v(" "),a("el-form-item",{attrs:{label:"配件名称："}},[a("el-input",{staticClass:"input_normal",attrs:{placeholder:""},model:{value:t.value.productSn,callback:function(e){t.$set(t.value,"productSn",e)},expression:"value.productSn"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"配件说明："}},[a("el-input",{staticClass:"input_normal",attrs:{placeholder:""},model:{value:t.value.productSn,callback:function(e){t.$set(t.value,"productSn",e)},expression:"value.productSn"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"入藏日期："}},[a("el-date-picker",{staticClass:"input_date",attrs:{type:"date",placeholder:"yyyy-mm-dd"},model:{value:t.value.date1,callback:function(e){t.$set(t.value,"date1",e)},expression:"value.date1"}})],1),t._v(" "),a("br"),t._v(" "),a("el-form-item",{attrs:{label:"配件数量："}},[a("el-input",{staticClass:"input_normal",attrs:{placeholder:""},model:{value:t.value.productSn,callback:function(e){t.$set(t.value,"productSn",e)},expression:"value.productSn"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"配件数量单位："}},[a("el-input",{staticClass:"input_normal",attrs:{placeholder:""},model:{value:t.value.productSn,callback:function(e){t.$set(t.value,"productSn",e)},expression:"value.productSn"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"备注："}},[a("el-input",{staticClass:"input_normal",attrs:{placeholder:""},model:{value:t.value.productSn,callback:function(e){t.$set(t.value,"productSn",e)},expression:"value.productSn"}})],1),t._v(" "),a("br"),t._v(" "),a("el-form-item",{staticStyle:{width:"262px"},attrs:{label:"配件相册："}},[a("multi-img-upload",{model:{value:t.selectProductPics,callback:function(e){t.selectProductPics=e},expression:"selectProductPics"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"配件文档："}},[a("single-file-upload",{model:{value:t.selectProductPics,callback:function(e){t.selectProductPics=e},expression:"selectProductPics"}})],1)],1)],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.attInfo.dialogVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.handleAttInfoConfirm()}}},[t._v("确 定")])],1)])],1)},staticRenderFns:[]};var K=a("VU/8")(z,H,!1,function(t){a("7SmP")},"data-v-e9dc73b0",null).exports,q=a("76W+"),M={albumPics:"",brandId:null,brandName:"",deleteStatus:0,description:"",detailDesc:"",detailHtml:"",detailMobileHtml:"",detailTitle:"",feightTemplateId:0,flashPromotionCount:0,flashPromotionId:0,flashPromotionPrice:0,flashPromotionSort:0,giftPoint:0,giftGrowth:0,keywords:"",lowStock:0,name:"",newStatus:0,note:"",originalPrice:0,pic:"",memberPriceList:[],productFullReductionList:[{fullPrice:0,reducePrice:0}],productLadderList:[{count:0,discount:0,price:0}],previewStatus:0,price:0,productAttributeCategoryId:null,productAttributeValueList:[],skuStockList:[],subjectProductRelationList:[],prefrenceAreaProductRelationList:[],productCategoryId:null,productCategoryName:"",productSn:"",promotionEndTime:"",promotionPerLimit:0,promotionPrice:null,promotionStartTime:"",promotionType:0,publishStatus:0,recommandStatus:0,sale:0,serviceIds:"",sort:0,stock:0,subTitle:"",unit:"",usePointLimit:0,verifyStatus:0,weight:0},W={name:"ProductDetail",components:{ProductInfoDetail:c,ProductSaleDetail:v,ProductAttrDetail:K},props:{isEdit:{type:Boolean,default:!1}},data:function(){return{active:0,productParam:i()({},M),showStatus:[!0,!1,!1]}},created:function(){var t=this;this.isEdit&&Object(q.c)(this.$route.query.id).then(function(e){t.productParam=e.data})},methods:{hideAll:function(){for(var t=0;t<this.showStatus.length;t++)this.showStatus[t]=!1},prevStep:function(){this.active>0&&this.active<this.showStatus.length&&(this.active--,this.hideAll(),this.showStatus[this.active]=!0)},nextStep:function(){this.active<this.showStatus.length-1&&(this.active++,this.hideAll(),this.showStatus[this.active]=!0)},finishCommit:function(t){var e=this;this.$confirm("是否要提交该产品","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t?Object(q.d)(e.$route.query.id,e.productParam).then(function(t){e.$message({type:"success",message:"提交成功",duration:1e3}),e.$router.back()}):Object(q.a)(e.productParam).then(function(t){e.$message({type:"success",message:"提交成功",duration:1e3}),location.reload()})})}}},G={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-card",{staticClass:"form-container",attrs:{shadow:"never"}},[a("div",{attrs:{id:"topMark"}}),t._v(" "),a("el-steps",{attrs:{active:t.active,"finish-status":"success","align-center":""}},[a("el-step",{attrs:{title:"填写基本信息"}}),t._v(" "),a("el-step",{attrs:{title:"填写来源及状况信息"}}),t._v(" "),a("el-step",{attrs:{title:"上传文档及填写配件信息"}})],1),t._v(" "),a("product-info-detail",{directives:[{name:"show",rawName:"v-show",value:t.showStatus[0],expression:"showStatus[0]"}],attrs:{"is-edit":t.isEdit},on:{nextStep:t.nextStep},model:{value:t.productParam,callback:function(e){t.productParam=e},expression:"productParam"}}),t._v(" "),a("product-sale-detail",{directives:[{name:"show",rawName:"v-show",value:t.showStatus[1],expression:"showStatus[1]"}],attrs:{"is-edit":t.isEdit},on:{nextStep:t.nextStep,prevStep:t.prevStep},model:{value:t.productParam,callback:function(e){t.productParam=e},expression:"productParam"}}),t._v(" "),a("product-attr-detail",{directives:[{name:"show",rawName:"v-show",value:t.showStatus[2],expression:"showStatus[2]"}],attrs:{"is-edit":t.isEdit},on:{nextStep:t.nextStep,prevStep:t.prevStep},model:{value:t.productParam,callback:function(e){t.productParam=e},expression:"productParam"}})],1)},staticRenderFns:[]};var Z=a("VU/8")(W,G,!1,function(t){a("Fy5r")},null,null);e.a=Z.exports},SkFu:function(t,e){},U6mV:function(t,e){},UCED:function(t,e){},WQDg:function(t,e){tinymce.addI18n("zh_CN",{Cut:"剪切","Heading 5":"标题5","Header 2":"标题2","Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.":"你的浏览器不支持对剪贴板的访问，请使用Ctrl+X/C/V键进行复制粘贴。","Heading 4":"标题4",Div:"Div区块","Heading 2":"标题2",Paste:"粘贴",Close:"关闭","Font Family":"字体",Pre:"预格式文本","Align right":"右对齐","New document":"新文档",Blockquote:"引用","Numbered list":"编号列表","Heading 1":"标题1",Headings:"标题","Increase indent":"增加缩进",Formats:"格式",Headers:"标题","Select all":"全选","Header 3":"标题3",Blocks:"区块",Undo:"撤消",Strikethrough:"删除线","Bullet list":"项目符号","Header 1":"标题1",Superscript:"上标","Clear formatting":"清除格式","Font Sizes":"字号",Subscript:"下标","Header 6":"标题6",Redo:"重复",Paragraph:"段落",Ok:"确定",Bold:"粗体",Code:"代码",Italic:"斜体","Align center":"居中","Header 5":"标题5","Heading 6":"标题6","Heading 3":"标题3","Decrease indent":"减少缩进","Header 4":"标题4","Paste is now in plain text mode. Contents will now be pasted as plain text until you toggle this option off.":"当前为纯文本粘贴模式，再次点击可以回到普通粘贴模式。",Underline:"下划线",Cancel:"取消",Justify:"两端对齐",Inline:"文本",Copy:"复制","Align left":"左对齐","Visual aids":"网格线","Lower Greek":"小写希腊字母",Square:"方块",Default:"默认","Lower Alpha":"小写英文字母",Circle:"空心圆",Disc:"实心圆","Upper Alpha":"大写英文字母","Upper Roman":"大写罗马字母","Lower Roman":"小写罗马字母","Id should start with a letter, followed only by letters, numbers, dashes, dots, colons or underscores.":"标识符应该以字母开头，后跟字母、数字、破折号、点、冒号或下划线。",Name:"名称",Anchor:"锚点",Id:"标识符","You have unsaved changes are you sure you want to navigate away?":"你还有文档尚未保存，确定要离开？","Restore last draft":"恢复上次的草稿","Special character":"特殊符号","Source code":"源代码",Language:"语言","Insert/Edit code sample":"插入/编辑代码示例",B:"B",R:"R",G:"G",Color:"颜色","Right to left":"从右到左","Left to right":"从左到右",Emoticons:"表情",Robots:"机器人","Document properties":"文档属性",Title:"标题",Keywords:"关键词",Encoding:"编码",Description:"描述",Author:"作者",Fullscreen:"全屏","Horizontal line":"水平分割线","Horizontal space":"水平边距","Insert/edit image":"插入/编辑图片",General:"普通",Advanced:"高级",Source:"地址",Border:"边框","Constrain proportions":"保持纵横比","Vertical space":"垂直边距","Image description":"图片描述",Style:"样式",Dimensions:"大小","Insert image":"插入图片",Image:"图片","Zoom in":"放大",Contrast:"对比度",Back:"后退",Gamma:"伽马值","Flip horizontally":"水平翻转",Resize:"调整大小",Sharpen:"锐化","Zoom out":"缩小","Image options":"图片选项",Apply:"应用",Brightness:"亮度","Rotate clockwise":"顺时针旋转","Rotate counterclockwise":"逆时针旋转","Edit image":"编辑图片","Color levels":"颜色层次",Crop:"裁剪",Orientation:"方向","Flip vertically":"垂直翻转",Invert:"反转","Date/time":"日期/时间","Insert date/time":"插入日期/时间","Remove link":"删除链接",Url:"地址","Text to display":"显示文字",Anchors:"锚点","Insert link":"插入链接",Link:"链接","New window":"在新窗口打开",None:"无","The URL you entered seems to be an external link. Do you want to add the required http:// prefix?":"你所填写的URL地址属于外部链接，需要加上http://:前缀吗？","Paste or type a link":"粘贴或输入链接",Target:"打开方式","The URL you entered seems to be an email address. Do you want to add the required mailto: prefix?":"你所填写的URL地址为邮件地址，需要加上mailto:前缀吗？","Insert/edit link":"插入/编辑链接","Insert/edit video":"插入/编辑视频",Media:"媒体","Alternative source":"镜像","Paste your embed code below:":"将内嵌代码粘贴在下面:","Insert video":"插入视频",Poster:"封面","Insert/edit media":"插入/编辑媒体",Embed:"内嵌","Nonbreaking space":"不间断空格","Page break":"分页符","Paste as text":"粘贴为文本",Preview:"预览",Print:"打印",Save:"保存","Could not find the specified string.":"未找到搜索内容.",Replace:"替换",Next:"下一个","Whole words":"全字匹配","Find and replace":"查找和替换","Replace with":"替换为",Find:"查找","Replace all":"全部替换","Match case":"区分大小写",Prev:"上一个",Spellcheck:"拼写检查",Finish:"完成","Ignore all":"全部忽略",Ignore:"忽略","Add to Dictionary":"添加到字典","Insert row before":"在上方插入",Rows:"行",Height:"高","Paste row after":"粘贴到下方",Alignment:"对齐方式","Border color":"边框颜色","Column group":"列组",Row:"行","Insert column before":"在左侧插入","Split cell":"拆分单元格","Cell padding":"单元格内边距","Cell spacing":"单元格外间距","Row type":"行类型","Insert table":"插入表格",Body:"表体",Caption:"标题",Footer:"表尾","Delete row":"删除行","Paste row before":"粘贴到上方",Scope:"范围","Delete table":"删除表格","H Align":"水平对齐",Top:"顶部对齐","Header cell":"表头单元格",Column:"列","Row group":"行组",Cell:"单元格",Middle:"垂直居中","Cell type":"单元格类型","Copy row":"复制行","Row properties":"行属性","Table properties":"表格属性",Bottom:"底部对齐","V Align":"垂直对齐",Header:"表头",Right:"右对齐","Insert column after":"在右侧插入",Cols:"列","Insert row after":"在下方插入",Width:"宽","Cell properties":"单元格属性",Left:"左对齐","Cut row":"剪切行","Delete column":"删除列",Center:"居中","Merge cells":"合并单元格","Insert template":"插入模板",Templates:"模板","Background color":"背景色","Custom...":"自定义...","Custom color":"自定义颜色","No color":"无","Text color":"文字颜色","Table of Contents":"内容列表","Show blocks":"显示区块边框","Show invisible characters":"显示不可见字符","Words: {0}":"字数：{0}",Insert:"插入",File:"文件",Edit:"编辑","Rich Text Area. Press ALT-F9 for menu. Press ALT-F10 for toolbar. Press ALT-0 for help":"在编辑区按ALT-F9打开菜单，按ALT-F10打开工具栏，按ALT-0查看帮助",Tools:"工具",View:"视图",Table:"表格",Format:"格式"})},fZjL:function(t,e,a){t.exports={default:a("jFbC"),__esModule:!0}},fy6M:function(t,e){},jFbC:function(t,e,a){a("Cdx3"),t.exports=a("FeBl").Object.keys},uUIc:function(t,e){},uqUo:function(t,e,a){var l=a("kM2E"),i=a("FeBl"),n=a("S82l");t.exports=function(t,e){var a=(i.Object||{})[t]||Object[t],s={};s[t]=e(a),l(l.S+l.F*n(function(){a(1)}),"Object",s)}},xMRZ:function(t,e){}});