webpackJsonp([10],{eBGa:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s("woOf"),n=s.n(a),l=s("UgCr"),o=s("caBC"),i=(s("3idm"),s("s/Rn"),s("mRsl"),s("Bp23"),s("76W+"),{keyword:null,pageNum:1,pageSize:5,publishStatus:null,collectionStatusValue:null,collectionFunctionValue:null,verifyStatus:null,productSn:null,productCategoryId:null,brandId:null,checked:!0,date1:null,date2:null}),u={name:"productList",data:function(){return{userInfo:{dialogVisible:!1,userid:"gq",username:"龚青",usertype:"0",password:"******",status:0},userlist:[{userid:"gq",username:"龚青",usertype:"0",password:"******",status:0},{userid:"yhy",username:"叶慧勇",usertype:"2",password:"******",status:0},{userid:"wsy",username:"吴松羽",usertype:"2",password:"******",status:1}],editSkuInfo:{dialogVisible:!1,productId:null,productSn:"",productAttributeCategoryId:null,stockList:[],productAttr:[],keyword:null},showFlg:!1,showButtonText:"高级查询",operateType:"customExp",listQuery:n()({},i),list:null,total:null,cltlist:null,clttotal:null,listLoading:!1,selectProductCateValue:null,selectCollectionCateValue:null,multipleSelection:[],productCateOptions:[],collectionCateOptions:[],brandOptions:[],collectionFunctionOptions:this.$store.state.app.collectionFunctionOptions,userDialogName:"新建用户",userTypeOptions:[{value:"0",label:"系统管理员"},{value:"1",label:"馆长"},{value:"2",label:"档案员"},{value:"3",label:"维修员"}],userStatusOptions:[{value:"0",label:"激活"},{value:"1",label:"锁定"}]}},created:function(){for(var e=0;e<this.expCols.length;e++)this.expColsData.push({key:e+1,label:this.expCols[e],disabled:!1})},watch:{selectProductCateValue:function(e){null!=e&&2==e.length?this.listQuery.productCategoryId=e[1]:this.listQuery.productCategoryId=null}},filters:{objectLevelFilter:function(e){return 3===e?"一级藏品":4===e?"二级藏品":5===e?"三级藏品":6===e?"四级藏品":"五级藏品"}},methods:{handleShowUserDialog:function(e,t,s){this.userInfo.dialogVisible=!0,s?(this.userDialogName="编辑用户",this.userInfo.userid=t.userid,this.userInfo.username=t.username,this.userInfo.usertype=t.usertype,this.userInfo.password=t.password,this.userInfo.status=t.status,this.$message({message:"编辑用户",type:"info",duration:1e3})):(this.userDialogName="新建用户",this.userInfo.userid=null,this.userInfo.username=null,this.userInfo.usertype=null,this.userInfo.password=null,this.userInfo.status=null,this.$message({message:"新建用户",type:"info",duration:1e3}))},handleRowClick:function(e,t,s){this.cltCateValue.object_type_a=e.object_type_a,this.cltCateValue.object_type_a_name=e.object_type_a_name,this.cltCateValue.object_type_b=e.object_type_b,this.cltCateValue.object_type_b_name=e.object_type_b_name,this.cltCateValue.object_type_c=e.object_type_c,this.cltCateValue.object_type_c_name=e.object_type_c_name},handleDeleteCollectionCate:function(){var e=this;this.$confirm("确定删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$message({message:"删除藏品分类",type:"info",duration:1e3})})},userTypeFormater:function(e){for(var t=this.userTypeOptions,s=0;s<t.length;s++){var a=t[s];if(a.value===e)return a.label}return""},userStatusFormater:function(e){for(var t=this.userStatusOptions,s=0;s<t.length;s++){var a=t[s];if(a.value===e)return a.label}return""},objectFunctionFormater:function(e){for(var t=this.$store.state.app.collectionFunctionOptions,s=0;s<t.length;s++){var a=t[s];return a.value===e?a.label:""}},objectCompleteFormater:function(e){for(var t=this.$store.state.app.collectionCompleteOptions,s=0;s<t.length;s++){var a=t[s];return a.value===e?a.label:""}},getProductSkuSp:function(e,t){return 0===t?e.sp1:1===t?e.sp2:e.sp3},handleShowExpColDialog:function(e,t){"customExp"===this.operateType?this.expColInfo.dialogVisible=!0:this.$message({message:"导出Excle",type:"info",duration:1e3})},handleUserInfoConfirm:function(){this.$message({message:"保存用户信息",type:"info",duration:1e3})},handleEditSkuConfirm:function(){var e=this;null==this.editSkuInfo.stockList||this.editSkuInfo.stockList.length<=0?this.$message({message:"暂无sku信息",type:"warning",duration:1e3}):this.$confirm("是否要进行修改","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(o.b)(e.editSkuInfo.productId,e.editSkuInfo.stockList).then(function(t){e.$message({message:"修改成功",type:"success",duration:1e3}),e.editSkuInfo.dialogVisible=!1})})},handleSearchList:function(){this.listQuery.pageNum=1,this.getList()},handleAddProduct:function(){this.$router.push({path:"/cms/addCollection"})},handleBatchOperate:function(){var e=this;null!=this.operateType?null==this.multipleSelection||this.multipleSelection.length<1?this.$message({message:"请选择要操作的商品",type:"warning",duration:1e3}):this.$confirm("是否要进行该批量操作?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){for(var t=[],s=0;s<e.multipleSelection.length;s++)t.push(e.multipleSelection[s].id);switch(e.operateType){case e.operates[0].value:e.updatePublishStatus(1,t);break;case e.operates[1].value:e.updatePublishStatus(0,t);break;case e.operates[2].value:e.updateRecommendStatus(1,t);break;case e.operates[3].value:e.updateRecommendStatus(0,t);break;case e.operates[4].value:e.updateNewStatus(1,t);break;case e.operates[5].value:e.updateNewStatus(0,t);break;case e.operates[6].value:break;case e.operates[7].value:e.updateDeleteStatus(1,t)}e.getList()}):this.$message({message:"请选择操作类型",type:"warning",duration:1e3})},handleSizeChange:function(e){this.listQuery.pageNum=1,this.listQuery.pageSize=e,this.getList()},handleCurrentChange:function(e){this.listQuery.pageNum=e,this.getList()},handleSelectionChange:function(e){this.multipleSelection=e},handlePublishStatusChange:function(e,t){var s=[];s.push(t.id),this.updatePublishStatus(t.publishStatus,s)},handleNewStatusChange:function(e,t){var s=[];s.push(t.id),this.updateNewStatus(t.newStatus,s)},handleRecommendStatusChange:function(e,t){var s=[];s.push(t.id),this.updateRecommendStatus(t.recommandStatus,s)},handleResetSearch:function(){this.selectProductCateValue=[],this.selectCollectionCateValue=[],this.listQuery=n()({},i)},handleDelete:function(e,t){var s=this;this.$confirm("是否要进行删除操作?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e=[];e.push(t.id),s.updateDeleteStatus(1,e)})},handleUpdateCollection:function(e,t){this.$router.push({path:"/cms/updateCollection",query:{id:t.id}})},handleUpdateProduct:function(e,t){this.$router.push({path:"/pms/updateProduct",query:{id:t.id}})},handleShowProduct:function(e,t){console.log("handleShowProduct",t)},handleShowVerifyDetail:function(e,t){console.log("handleShowVerifyDetail",t)},handleShowLog:function(e,t){console.log("handleShowLog",t)},updatePublishStatus:function(e,t){var s=this,a=new URLSearchParams;a.append("ids",t),a.append("publishStatus",e),Object(l.d)(a).then(function(e){s.$message({message:"修改成功",type:"success",duration:1e3})})},updateNewStatus:function(e,t){var s=this,a=new URLSearchParams;a.append("ids",t),a.append("newStatus",e),Object(l.c)(a).then(function(e){s.$message({message:"修改成功",type:"success",duration:1e3})})},updateRecommendStatus:function(e,t){var s=this,a=new URLSearchParams;a.append("ids",t),a.append("recommendStatus",e),Object(l.e)(a).then(function(e){s.$message({message:"修改成功",type:"success",duration:1e3})})},updateDeleteStatus:function(e,t){var s=this,a=new URLSearchParams;a.append("ids",t),a.append("deleteStatus",e),Object(l.b)(a).then(function(e){s.$message({message:"删除成功",type:"success",duration:1e3})}),this.getList()}}},r={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"app-container"},[s("div",{attrs:{id:"target"}}),e._v(" "),s("el-card",{staticClass:"operate-container"},[s("el-card",{staticClass:"operate-container",attrs:{shadow:"never"}},[s("i",{staticClass:"el-icon-tickets"}),e._v(" "),s("span",[e._v("用户设置")]),e._v(" "),s("el-button",{staticStyle:{"margin-left":"600px"},attrs:{type:"primary",icon:"el-icon-plus",size:"small"},on:{click:function(t){e.handleShowUserDialog(null,null,!1)}}},[e._v("添加用户")])],1),e._v(" "),s("div",{staticClass:"table-container"},[s("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],ref:"productTable",staticStyle:{width:"810px"},attrs:{data:e.userlist,"max-height":"400",border:""}},[s("el-table-column",{attrs:{label:"用户ID",width:"140",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.userid))]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"用户名称",width:"140",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.username))]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"用户类别",width:"140",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("span",{domProps:{innerHTML:e._s(e.userTypeFormater(t.row.usertype))}})]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"用户激活",width:"140",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("p",[s("el-switch",{attrs:{"active-value":0,"inactive-value":1},model:{value:t.row.status,callback:function(s){e.$set(t.row,"status",s)},expression:"scope.row.status"}})],1)]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"用户密码",width:"140",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.password))]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"操作",width:"110",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-button-group",[s("el-button",{attrs:{type:"error",icon:"el-icon-edit",size:"mini"},on:{click:function(s){e.handleShowUserDialog(t.$index,t.row,!0)}}}),e._v(" "),s("el-button",{attrs:{type:"error",icon:"el-icon-delete",size:"mini"},on:{click:function(s){e.handleDeleteCollectionCate(t.$index,t.row)}}})],1)]}}])})],1)],1)],1),e._v(" "),s("el-dialog",{attrs:{title:e.userDialogName,visible:e.userInfo.dialogVisible,width:"30%"},on:{"update:visible":function(t){e.$set(e.userInfo,"dialogVisible",t)}}},[s("el-form",{attrs:{model:e.userInfo,size:"mini","label-width":"160px"}},[s("el-form-item",{attrs:{label:"用户ID："}},[s("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:""},model:{value:e.userInfo.userid,callback:function(t){e.$set(e.userInfo,"userid",t)},expression:"userInfo.userid"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"用户密码："}},[s("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:""},model:{value:e.userInfo.password,callback:function(t){e.$set(e.userInfo,"password",t)},expression:"userInfo.password"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"用户名称："}},[s("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:""},model:{value:e.userInfo.username,callback:function(t){e.$set(e.userInfo,"username",t)},expression:"userInfo.username"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"用户类别："}},[s("el-select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择",clearable:""},model:{value:e.userInfo.usertype,callback:function(t){e.$set(e.userInfo,"usertype",t)},expression:"userInfo.usertype"}},e._l(e.userTypeOptions,function(e){return s("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),s("el-form-item",{attrs:{label:"用户激活："}},[s("el-switch",{attrs:{"active-value":0,"inactive-value":1},model:{value:e.userInfo.status,callback:function(t){e.$set(e.userInfo,"status",t)},expression:"userInfo.status"}})],1)],1),e._v(" "),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(t){e.userInfo.dialogVisible=!1}}},[e._v("取 消")]),e._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:e.handleUserInfoConfirm}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var c=s("VU/8")(u,r,!1,function(e){s("mJbX")},null,null);t.default=c.exports},mJbX:function(e,t){}});