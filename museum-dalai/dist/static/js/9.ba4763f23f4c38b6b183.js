webpackJsonp([9],{"CO+i":function(e,t){},"t/FD":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("woOf"),l=a.n(n),i=a("UgCr"),o=a("caBC"),c=a("3idm"),s=a("s/Rn"),u=a("mRsl"),r=a("Bp23"),d=a("76W+"),p={keyword:null,pageNum:1,pageSize:5,publishStatus:null,collectionStatusValue:null,collectionFunctionValue:null,verifyStatus:null,productSn:null,productCategoryId:null,brandId:null,checked:!0,date1:null,date2:null},h={name:"productList",data:function(){return{cltCateValue:{object_type_a:"",object_type_a_name:"",object_type_b:"",object_type_b_name:"",object_type_c:"",object_type_c_name:""},cltCatelist:[{object_type_a:"10",object_type_a_name:"机械钟",object_type_b:"10",object_type_b_name:"重力钟",object_type_c:"10",object_type_c_name:"挂钟"},{object_type_a:"10",object_type_a_name:"机械钟",object_type_b:"10",object_type_b_name:"重力钟",object_type_c:"20",object_type_c_name:"锯齿钟"},{object_type_a:"10",object_type_a_name:"机械钟",object_type_b:"10",object_type_b_name:"重力钟",object_type_c:"30",object_type_c_name:"球钟"},{object_type_a:"10",object_type_a_name:"机械钟",object_type_b:"20",object_type_b_name:"航海钟",object_type_c:"10",object_type_c_name:"船钟"},{object_type_a:"10",object_type_a_name:"机械钟",object_type_b:"20",object_type_b_name:"航海钟",object_type_c:"20",object_type_c_name:"艺术钟"}],data:[{id:1,label:"一级 1",time:"2016-06-16",children:[{id:4,label:"二级 1-1",time:"2016-06-16",children:[{id:9,label:"三级 1-1-1",time:"2016-06-16"},{id:10,label:"三级 1-1-2",time:"2016-06-16"}]}]},{id:2,label:"一级 2",time:"2016-06-16",children:[{id:5,label:"二级 2-1",time:"2016-06-16"},{id:6,label:"二级 2-2",time:"2016-06-16"}]},{id:3,label:"一级 3",time:"2016-06-16",children:[{id:7,label:"二级 3-1",time:"2016-06-16"},{id:8,label:"二级 3-2",time:"2016-06-16"}]}],defaultProps:{children:"children",label:"label",time:"time"},editSkuInfo:{dialogVisible:!1,productId:null,productSn:"",productAttributeCategoryId:null,stockList:[],productAttr:[],keyword:null},showFlg:!1,showButtonText:"高级查询",operateType:"customExp",listQuery:l()({},p),list:null,total:null,cltlist:null,clttotal:null,listLoading:!0,selectProductCateValue:null,selectCollectionCateValue:null,multipleSelection:[],productCateOptions:[],collectionCateOptions:[],brandOptions:[],collectionFunctionOptions:this.$store.state.app.collectionFunctionOptions}},created:function(){this.getList(),this.getBrandList(),this.getProductCateList(),this.getCollectionCateList();for(var e=0;e<this.expCols.length;e++)this.expColsData.push({key:e+1,label:this.expCols[e],disabled:!1})},watch:{selectProductCateValue:function(e){null!=e&&2==e.length?this.listQuery.productCategoryId=e[1]:this.listQuery.productCategoryId=null}},filters:{verifyStatusFilter:function(e){return 1===e?"审核通过":"未审核"},objectLevelFilter:function(e){return 3===e?"一级藏品":4===e?"二级藏品":5===e?"三级藏品":6===e?"四级藏品":"五级藏品"}},methods:{handleRowClick:function(e,t,a){this.cltCateValue.object_type_a=e.object_type_a,this.cltCateValue.object_type_a_name=e.object_type_a_name,this.cltCateValue.object_type_b=e.object_type_b,this.cltCateValue.object_type_b_name=e.object_type_b_name,this.cltCateValue.object_type_c=e.object_type_c,this.cltCateValue.object_type_c_name=e.object_type_c_name},handleDeleteCollectionCate:function(){var e=this;this.$confirm("确定删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$message({message:"删除藏品分类",type:"info",duration:1e3})})},addCategory:function(){var e=this;this.$prompt("请输入分类名称","添加分类",{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/^.*[^\s]+.*$/,inputErrorMessage:"分类名称不能为空"}).then(function(t){var a=t.value;e.data.push({id:id++,label:a,time:"2016-06-16",children:[]}),e.$message({type:"success",message:"分类添加成功"})}).catch(function(){e.$message({type:"info",message:"取消添加分类"})})},append:function(e,t){var a=this;this.$prompt("请输入分类名称","添加子分类",{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/^.*[^\s]+.*$/,inputErrorMessage:"分类名称不能为空"}).then(function(n){var l=n.value;e.append({id:id++,label:l,time:"2016-06-16",children:[]},t),a.$message({type:"success",message:"子分类添加成功"})}).catch(function(){a.$message({type:"info",message:"取消添加分类"})})},remove:function(e,t){e.remove(t)},renderContent:function(e,t){var a=this,n=t.node,l=t.data,i=t.store;return e("div",[e("span",{class:"node-text"},[e("span",[n.label])]),e("span",{class:"node-action"},[e("span",{class:"tree-edite"},["编辑"]),e("span",{class:"tree-add",on:{click:function(){return a.append(i,l)}}},["添加子类"]),e("span",{class:"tree-del",on:{click:function(){return a.remove(i,l)}}},["删除"])]),e("span",{class:"node-time"},[l.time])])},showOrHide:function(){this.showFlg?this.showButtonText="高级查询":this.showButtonText="快速查询",this.showFlg=!this.showFlg},objectFunctionFormater:function(e){for(var t=this.$store.state.app.collectionFunctionOptions,a=0;a<t.length;a++){var n=t[a];return n.value===e?n.label:""}},objectCompleteFormater:function(e){for(var t=this.$store.state.app.collectionCompleteOptions,a=0;a<t.length;a++){var n=t[a];return n.value===e?n.label:""}},getProductSkuSp:function(e,t){return 0===t?e.sp1:1===t?e.sp2:e.sp3},getList:function(){var e=this;this.listLoading=!0,Object(i.a)(this.listQuery).then(function(t){e.listLoading=!1,e.list=t.data.list,e.total=t.data.total}),Object(d.b)(this.listQuery).then(function(t){e.listLoading=!1,e.cltlist=t.data.list,e.clttotal=t.data.total})},getBrandList:function(){var e=this;Object(s.a)({pageNum:1,pageSize:100}).then(function(t){e.brandOptions=[];for(var a=t.data.list,n=0;n<a.length;n++)e.brandOptions.push({label:a[n].name,value:a[n].id})})},getCollectionCateList:function(){var e=this;Object(r.a)().then(function(t){var a=t.data;e.collectionCateOptions=[];for(var n=0;n<a.length;n++){var l=[];if(null!=a[n].children&&a[n].children.length>0)for(var i=0;i<a[n].children.length;i++){var o=[];if(null!=a[n].children[i].children&&a[n].children[i].children.length>0)for(var c=0;c<a[n].children[i].children.length;c++)o.push({label:a[n].children[i].children[c].name,value:a[n].children[i].children[c].id});o.length>0?l.push({label:a[n].children[i].name,value:a[n].children[i].id,children:o}):l.push({label:a[n].children[i].name,value:a[n].children[i].id})}e.collectionCateOptions.push({label:a[n].name,value:a[n].id,children:l})}})},getProductCateList:function(){var e=this;Object(u.a)().then(function(t){var a=t.data;e.productCateOptions=[];for(var n=0;n<a.length;n++){var l=[];if(null!=a[n].children&&a[n].children.length>0)for(var i=0;i<a[n].children.length;i++)l.push({label:a[n].children[i].name,value:a[n].children[i].id});e.productCateOptions.push({label:a[n].name,value:a[n].id,children:l})}})},handleShowExpColDialog:function(e,t){"customExp"===this.operateType?this.expColInfo.dialogVisible=!0:this.$message({message:"导出Excle",type:"info",duration:1e3})},handleShowSkuEditDialog:function(e,t){var a=this;this.editSkuInfo.dialogVisible=!0,this.editSkuInfo.productId=t.id,this.editSkuInfo.productSn=t.productSn,this.editSkuInfo.productAttributeCategoryId=t.productAttributeCategoryId,this.editSkuInfo.keyword=null,Object(o.a)(t.id,{keyword:this.editSkuInfo.keyword}).then(function(e){a.editSkuInfo.stockList=e.data}),Object(c.a)(t.productAttributeCategoryId,{type:0}).then(function(e){a.editSkuInfo.productAttr=e.data.list})},handleSearchEditSku:function(){var e=this;Object(o.a)(this.editSkuInfo.productId,{keyword:this.editSkuInfo.keyword}).then(function(t){e.editSkuInfo.stockList=t.data})},handleExpColCustomConfirm:function(){this.$message({message:"导出自定义字段到Excle",type:"info",duration:1e3})},handleEditSkuConfirm:function(){var e=this;null==this.editSkuInfo.stockList||this.editSkuInfo.stockList.length<=0?this.$message({message:"暂无sku信息",type:"warning",duration:1e3}):this.$confirm("是否要进行修改","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(o.b)(e.editSkuInfo.productId,e.editSkuInfo.stockList).then(function(t){e.$message({message:"修改成功",type:"success",duration:1e3}),e.editSkuInfo.dialogVisible=!1})})},handleSearchList:function(){this.listQuery.pageNum=1,this.getList()},handleAddProduct:function(){this.$router.push({path:"/cms/addCollection"})},handleBatchOperate:function(){var e=this;null!=this.operateType?null==this.multipleSelection||this.multipleSelection.length<1?this.$message({message:"请选择要操作的商品",type:"warning",duration:1e3}):this.$confirm("是否要进行该批量操作?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){for(var t=[],a=0;a<e.multipleSelection.length;a++)t.push(e.multipleSelection[a].id);switch(e.operateType){case e.operates[0].value:e.updatePublishStatus(1,t);break;case e.operates[1].value:e.updatePublishStatus(0,t);break;case e.operates[2].value:e.updateRecommendStatus(1,t);break;case e.operates[3].value:e.updateRecommendStatus(0,t);break;case e.operates[4].value:e.updateNewStatus(1,t);break;case e.operates[5].value:e.updateNewStatus(0,t);break;case e.operates[6].value:break;case e.operates[7].value:e.updateDeleteStatus(1,t)}e.getList()}):this.$message({message:"请选择操作类型",type:"warning",duration:1e3})},handleSizeChange:function(e){this.listQuery.pageNum=1,this.listQuery.pageSize=e,this.getList()},handleCurrentChange:function(e){this.listQuery.pageNum=e,this.getList()},handleSelectionChange:function(e){this.multipleSelection=e},handlePublishStatusChange:function(e,t){var a=[];a.push(t.id),this.updatePublishStatus(t.publishStatus,a)},handleNewStatusChange:function(e,t){var a=[];a.push(t.id),this.updateNewStatus(t.newStatus,a)},handleRecommendStatusChange:function(e,t){var a=[];a.push(t.id),this.updateRecommendStatus(t.recommandStatus,a)},handleResetSearch:function(){this.selectProductCateValue=[],this.selectCollectionCateValue=[],this.listQuery=l()({},p)},handleDelete:function(e,t){var a=this;this.$confirm("是否要进行删除操作?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e=[];e.push(t.id),a.updateDeleteStatus(1,e)})},handleUpdateCollection:function(e,t){this.$router.push({path:"/cms/updateCollection",query:{id:t.id}})},handleUpdateProduct:function(e,t){this.$router.push({path:"/pms/updateProduct",query:{id:t.id}})},handleShowProduct:function(e,t){console.log("handleShowProduct",t)},handleShowVerifyDetail:function(e,t){console.log("handleShowVerifyDetail",t)},handleShowLog:function(e,t){console.log("handleShowLog",t)},updatePublishStatus:function(e,t){var a=this,n=new URLSearchParams;n.append("ids",t),n.append("publishStatus",e),Object(i.d)(n).then(function(e){a.$message({message:"修改成功",type:"success",duration:1e3})})},updateNewStatus:function(e,t){var a=this,n=new URLSearchParams;n.append("ids",t),n.append("newStatus",e),Object(i.c)(n).then(function(e){a.$message({message:"修改成功",type:"success",duration:1e3})})},updateRecommendStatus:function(e,t){var a=this,n=new URLSearchParams;n.append("ids",t),n.append("recommendStatus",e),Object(i.e)(n).then(function(e){a.$message({message:"修改成功",type:"success",duration:1e3})})},updateDeleteStatus:function(e,t){var a=this,n=new URLSearchParams;n.append("ids",t),n.append("deleteStatus",e),Object(i.b)(n).then(function(e){a.$message({message:"删除成功",type:"success",duration:1e3})}),this.getList()}}},_={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("div",{attrs:{id:"target"}}),e._v(" "),a("el-card",{staticClass:"operate-container"},[a("i",{staticClass:"el-icon-tickets"}),e._v(" "),a("span",[e._v("藏品分类列表")]),e._v(" "),a("el-card",{staticClass:"operate-container",attrs:{shadow:"never"}},[a("el-form",{attrs:{inline:!0,model:e.listQuery,size:"mini","label-width":"140px"}},[a("el-form-item",{attrs:{label:"藏品分类查询条件："}},[a("el-cascader",{staticStyle:{width:"315px"},attrs:{options:e.collectionCateOptions,"change-on-select":"",clearable:""},model:{value:e.selectCollectionCateValue,callback:function(t){e.selectCollectionCateValue=t},expression:"selectCollectionCateValue"}})],1),e._v(" "),a("el-button",{staticStyle:{"margin-left":"40px"},attrs:{icon:"el-icon-search",type:"primary",size:"small"},on:{click:function(t){e.handleSearchCollectionCateList()}}},[e._v("查询")])],1)],1),e._v(" "),a("div",{staticClass:"table-container"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],ref:"productTable",staticStyle:{width:"950px"},attrs:{data:e.cltCatelist,"max-height":"260",border:""},on:{"row-click":e.handleRowClick}},[a("el-table-column",{attrs:{label:"大分类代码",width:"140",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.object_type_a))]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"大分类名称",width:"140",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.object_type_a_name))]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"中分类代码",width:"140",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.object_type_b))]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"中分类名称",width:"140",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.object_type_b_name))]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"小分类代码",width:"140",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.object_type_c))]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"小分类名称",width:"140",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.object_type_c_name))]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"110",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tooltip",{attrs:{content:"删除分类",placement:"bottom",effect:"light"}},[a("el-button",{attrs:{type:"error",icon:"el-icon-delete",size:"mini"},on:{click:function(a){e.handleDeleteCollectionCate(t.$index,t.row)}}})],1)]}}])})],1)],1),e._v(" "),a("el-card",{staticClass:"operate-container",attrs:{shadow:"never"}},[a("el-form",{attrs:{inline:!0,model:e.cltCateValue,size:"mini","label-width":"160px"}},[a("el-form-item",{attrs:{label:"大分类代码："}},[a("el-input",{staticStyle:{width:"100px"},attrs:{placeholder:""},model:{value:e.cltCateValue.object_type_a,callback:function(t){e.$set(e.cltCateValue,"object_type_a",t)},expression:"cltCateValue.object_type_a"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"中分类代码："}},[a("el-input",{staticStyle:{width:"100px"},attrs:{placeholder:""},model:{value:e.cltCateValue.object_type_b,callback:function(t){e.$set(e.cltCateValue,"object_type_b",t)},expression:"cltCateValue.object_type_b"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"小分类代码："}},[a("el-input",{staticStyle:{width:"100px"},attrs:{placeholder:""},model:{value:e.cltCateValue.object_type_c,callback:function(t){e.$set(e.cltCateValue,"object_type_c",t)},expression:"cltCateValue.object_type_c"}})],1),e._v(" "),a("br"),e._v(" "),a("el-form-item",{attrs:{label:"大分类名称："}},[a("el-input",{staticStyle:{width:"100px"},attrs:{placeholder:""},model:{value:e.cltCateValue.object_type_a_name,callback:function(t){e.$set(e.cltCateValue,"object_type_a_name",t)},expression:"cltCateValue.object_type_a_name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"中分类名称："}},[a("el-input",{staticStyle:{width:"100px"},attrs:{placeholder:""},model:{value:e.cltCateValue.object_type_b_name,callback:function(t){e.$set(e.cltCateValue,"object_type_b_name",t)},expression:"cltCateValue.object_type_b_name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"小分类名称："}},[a("el-input",{staticStyle:{width:"100px"},attrs:{placeholder:""},model:{value:e.cltCateValue.object_type_c_name,callback:function(t){e.$set(e.cltCateValue,"object_type_c_name",t)},expression:"cltCateValue.object_type_c_name"}})],1)],1),e._v(" "),a("el-button",{staticStyle:{"margin-left":"60px"},attrs:{type:"primary",size:"small"},on:{click:function(t){e.handleSaveCollectionCate()}}},[e._v("保存")])],1)],1)],1)},staticRenderFns:[]};var b=a("VU/8")(h,_,!1,function(e){a("CO+i")},null,null);t.default=b.exports}});